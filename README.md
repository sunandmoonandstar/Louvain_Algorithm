# Louvain_Algorithm
## Louvain算法的完整过程
一般我们认为社团所具有的属性为在社区内部的节点相似度较高，而在社区外部节点的相似度较低，基于这个属性我们用模块度（Modularity）来衡量一个社区的划分是否优良。Louvain算法正是利用了这一度量指标，通过最大化模块度实现社区的划分，主要有以下两个阶段：
- 阶段一: 通过局部调整节点所在社区使得网络的模块度达到最优, 进而实现对社区的划分;
	>1. 初始时, 将每个节点看作一个单独的社区, 计算模块度 Q;
  >2. 对于每个节点 i, 逐个计算将其移动到邻点所在的社区后模块度增益 ∆Q;
  >3. 将 i 移动到使得 ∆Q > 0 最大的社区内;
  >4. 重复进行 2、3 直至移动任何节点都不会增加模块度, 阶段一结束。
-  阶段二: 将同一社区的节点聚合成一个“超级节点”, 构建新的网络;
	 >1. 化点: 一个社区作为一个“超级节点”;
	  >2. 建边: 原社区间只要有边就给对应的“超级节点”连一条边, 社区内有边则给对应的“超级节点”建一个自环;
	  >3. 赋权: 原社区间所有边上的权重之和赋给对应“超级节点”间的边, 社区内所有边上的权重各自算两边加和赋
- 回到阶段一
## 数据集信息
Louvain算法可适用于多种类型的网络，根据网络的不同，模块度的定义会有所区别。本篇代码以斯坦福数据集中的email-Eu-core network为例，实现了针对无向无权图的社区划分过程，数据信息如下：
 |数据集         |    email-Eu-core network             |
|----------------|-------------------------------
|Nodes|1005          
|Nodes	|25571           
|Average clustering coefficient|0.3994
|Number of triangles | 105461
|Diameter (longest shortest path)| 7
  [数据集链接](http://snap.stanford.edu/data/email-Eu-core.html)
## Requirements
pip install collections
pip install numpy  
pip install random
pip install networkx
pip install matplotlib.pyplot 
pip install scipy
## 实验结果
|       |              |
|----------------|-------------------------------
| 社区 1  | 256, 515, 4, 522, 523, 526, 270, 275, 276, 789, 534, 790, 791, 280, 542, 543, 544, 801, 290, 291, 292, 802, 294, 556, 813, 817, 562, 563, 53, 822, 567, 568, 572, 829, 574, 576, 65, 835, 836, 584, 585, 840, 843, 844, 850, 600, 93, 95, 611, 874, 620, 623, 626, 129, 133, 902, 909, 910, 655, 399, 401, 403, 664, 413, 419, 167, 168, 936, 425, 426, 172, 938, 940, 176, 688, 689, 694, 183, 440, 702, 959, 705, 706, 961, 450, 197, 198, 199, 200, 201, 202, 203, 714, 965, 206, 207, 457, 458, 464, 727, 732, 992, 484, 486, 232, 744, 1000, 749, 493
|社区 2   |769, 11, 268, 271, 784, 785, 788, 792, 24, 282, 27, 28, 29, 30, 283, 288, 545, 33, 31, 36, 37, 807, 39, 40, 559, 560, 49, 50, 821, 62, 831, 577, 578, 70, 71, 331, 588, 590, 80, 82, 83, 594, 84, 86, 601, 864, 355, 612, 614, 870, 107, 876, 109, 878, 366, 364, 875, 372, 373, 121, 131, 132, 643, 142, 654, 144, 915, 152, 153, 410, 411, 671, 160, 162, 163, 932, 166, 679, 431, 432, 433, 693, 950, 953, 186, 701, 964, 454, 966, 716, 717, 462, 463, 721, 722, 726, 471, 217, 736, 737, 997, 492, 494, 752, 756, 759, 507, 253, 254
|社区 3   |264, 265, 266, 267, 12, 525, 14, 529, 530, 804, 293, 805, 555, 43, 44, 558, 565, 566, 823, 569, 570, 827, 573, 830, 833, 324, 332, 856, 602, 608, 358, 359, 360, 362, 365, 374, 893, 649, 141, 912, 913, 658, 661, 406, 407, 666, 922, 672, 161, 674, 421, 427, 430, 951, 441, 699, 700, 956, 957, 707, 451, 452, 967, 973, 720, 466, 980, 213, 470, 729, 739, 996, 503, 998, 487, 488, 504, 505, 496, 754, 498, 499, 500, 246, 247, 501, 249, 502, 506, 765, 510 
社区 4   |2, 3, 774, 520, 521, 531, 532, 21, 281, 539, 286, 803, 553, 554, 811, 557, 815, 305, 56, 57, 58, 571, 59, 826, 63, 832, 581, 583, 586, 587, 845, 77, 78, 79, 849, 848, 340, 598, 606, 863, 862, 865, 622, 880, 625, 882, 884, 633, 634, 635, 636, 899, 901, 134, 648, 137, 138, 408, 921, 412, 670, 928, 685, 691, 445, 192, 193, 194, 195, 711, 456, 718, 982, 990, 993, 994, 483, 482, 1001, 497, 755, 762, 766
社区 5   |1, 516, 517, 775, 18, 797, 798, 297, 307, 308, 309, 310, 311, 312, 313, 314, 315, 316, 317, 73, 74, 846, 852, 85, 341, 603, 605, 872, 734, 629, 120, 645, 904, 905, 650, 916, 414, 415, 675, 177, 696, 697, 449, 459, 468, 215, 218, 731, 219, 220, 221, 222, 224, 225, 226, 227, 228, 223, 479, 743, 1002, 248, 764, 767      
社区 6  |778, 779, 780, 911, 15, 146, 663, 536, 667, 540, 799, 800, 287, 418, 549, 550, 551, 678, 298, 299, 690, 818, 952, 184, 187, 188, 189, 958, 190, 67, 68, 69, 582, 710, 968, 713, 969, 715, 972, 81, 467, 595, 855, 473, 474, 91, 476, 480, 999, 873, 746, 747, 877, 627, 508, 509
社区 7  |128, 642, 255, 644, 5, 6, 647, 776, 908, 782, 528, 659, 917, 918, 25, 537, 548, 41, 939, 941, 686, 942, 51, 820, 435, 948, 955, 64, 960, 834, 196, 453, 837, 970, 204, 205, 974, 593, 472, 861, 94, 610, 995, 613, 616, 489, 745, 490, 491, 619, 1003, 751, 117, 758, 127
社区 8  |384, 385, 386, 387, 388, 389, 390, 7, 391, 392, 393, 394, 395, 396, 397, 398, 653, 150, 295, 296, 772, 943, 947, 52, 181, 182, 60, 61, 320, 321, 841, 719, 853, 985, 868, 741, 869, 103, 104, 376, 377, 378, 368, 628, 632, 761, 250, 379, 380, 381, 382, 383
社区 9  |0, 257, 130, 262, 903, 907, 781, 656, 402, 148, 149, 277, 278, 668, 156, 284, 157, 289, 680, 681, 682, 814, 178, 179, 180, 692, 824, 575, 191, 839, 712, 851, 214, 342, 343, 344, 345, 346, 347, 348, 349, 350, 351, 352, 857, 231, 871, 621, 122, 511
社区 10   |259, 260, 777, 9, 524, 400, 20, 535, 538, 923, 924, 416, 806, 808, 302, 303, 304, 945, 306, 825, 703, 962, 325, 326, 327, 72, 975, 723, 88, 89, 858, 92, 733, 96, 740, 750, 369, 881, 885, 630, 887, 890, 252, 894
社区 11   |897, 261, 263, 10, 527, 919, 151, 795, 925, 417, 547, 423, 171, 47, 48, 442, 443, 444, 318, 704, 75, 76, 333, 847, 976, 725, 981, 983, 229, 485, 361, 367, 113, 114, 370, 753, 245, 757, 119, 895
社区 12   |640, 768, 770, 16, 787, 404, 662, 34, 935, 424, 937, 42, 684, 687, 561, 434, 185, 323, 580, 708, 709, 842, 460, 212, 87, 607, 97, 98, 99, 100, 101, 353, 354, 105, 618, 371, 763, 124, 125
社区 13   |900, 135, 136, 651, 13, 914, 409, 26, 420, 165, 677, 169, 170, 810, 301, 816, 436, 437, 438, 439, 330, 336, 337, 338, 339, 724, 978, 860, 609, 123, 624, 115, 116, 883, 118, 251
社区 14   |139, 140, 269, 272, 17, 273, 274, 657, 660, 794, 796, 929, 164, 676, 933, 428, 45, 46, 429, 819, 446, 447, 448, 322, 579, 838, 461, 334, 335, 592, 854, 216, 735, 617, 760
社区 15   |963, 639, 209, 210, 19, 977, 599, 926, 159, 158, 927, 930, 931, 233, 234, 235, 236, 237, 238, 239, 240, 241, 242, 243, 564, 244, 879, 631, 637, 319
社区 16   |512, 641, 519, 906, 589, 783, 591, 465, 786, 147, 979, 596, 597, 23, 920, 793, 279, 730, 541, 669, 673, 230, 742, 748, 495, 944, 946, 695
社区 17   |898, 646, 455, 208, 211, 469, 22, 728, 986, 987, 604, 285, 988, 481, 738, 866, 867, 552, 809, 683, 1004, 949, 54, 55, 698, 126
社区 18   |258, 514, 66, 328, 8, 329, 652, 143, 90, 475, 989, 477, 478, 356, 357, 108, 110, 111, 112, 375
社区 19   |896, 771, 773, 38, 102, 828, 106, 300, 173, 405, 889, 891, 892, 638
社区 20   |513, 546, 35, 422, 615, 518, 934, 154, 363, 145, 533, 984, 954, 155
社区 21   |32, 971, 812, 174, 175, 886, 888, 665, 859, 991
